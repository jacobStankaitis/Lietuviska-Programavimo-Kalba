var lolspace_user_functions=[],lolspace_errored=!1,lolspace_puts_cb=null;function lolspace_xor(e,r){return!(!e&&!r||e&&r)}function lolspace_puts(e,r){e=""+e,null!=lolspace_puts_cb?lolspace_puts_cb(e,r):alert(e)}function lolspace_set_puts(e){lolspace_puts_cb=e}function lolspace_chr(e){return String.fromCharCode(e)}function lolspace_ord(e){return e.charCodeAt(0)}function lolspace_len(e){return void 0!==e.length?e.length:0}function lolspace_cast_bukkit(e){return"string"==typeof e||"String"==typeof e?e.split(""):[e]}function lolspace_error(e){lolspace_errored&&null==lolspace_puts_cb||lolspace_puts("Galutinai sulaužei mane, buržujau!\n"+e),lolspace_errored=!0}function lolspace_init(){lolspace_errored=!1,lolspace_user_functions=[]}function lolspace_is_func(e){for(var r=0;r<lolspace_user_functions.length;r++)if(lolspace_user_functions[r].name==e)return!0;return!1}function lolspace_func_get_num_args(e){for(var r=0;r<lolspace_user_functions.length;r++)if(lolspace_user_functions[r].name==e)return lolspace_user_functions[r].num_args;return!1}function lolspace_strip_comments(e){return e=(e=e.replace(/NESAMONES([\s\S]*?)NESVARBU/g,"")).replace(/(TA PRASME|NORIU PASIREIKSTI).*/g,"")}function lolspace_prepare(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/LABAS.*/g,"")).replace(/SVEIKIII.*/g,"")).replace(/ATE.*/g,"")).replace(/IKI.*/g,"")).replace(/MAN REIKIA .*/g,"")).replace(/[ \t]+/g," ")).replace(/[,]/g,"\n")).replace(/\.{3}[ ]*\n/g,"")).replace(/\r\n|\r|\n/g,"\n")).replace(/[ ]+\n/g,"\n")).replace(/(.*) PAVERSK I (.*)/g,"$1 R MAEK $1 A $2")).replace(/(I HAS A (.*)) IT[SZ] (.*)/g,"$1\n$2 R $3")).replace(/(PAS MANE YRA (.*)) KURIS YRA (.*)/g,"$1\n$2 R $3")).replace(/\bWIN\b/g,"true")).replace(/\bFAIL\b/g,"false")).replace(/\bTEISYBE\b/g,"true")).replace(/\bTIESA\b/g,"true")).replace(/\bNEMELAS\b/g,"true")).replace(/\bMELAS\b/g,"false")).replace(/\bNETIESA\b/g,"false")).replace(/\bNETEISYBE\b/g,"false")}function lolspace_do_string_literals(e,r){if(1==r||null==r){this.aliases=[],this.num_alaises=0;for(var a,s=-1,l=0,c=!1,n="";-1!==(s=e.indexOf('"',s+1));){if(c){for(var t=0,o=s-1;o>=0&&":"==e[o--];)t++;if(!(t%2)){c=!1;var u=e.substr(a+1,s-a-1);u=(u=u.replace(/(\\*)(\n)/g,function(e,r){return r.length%2?e:"\\n"})).replace(/:([\)>o":]|\(.*?\)|\{.*?\})/g,function(e,r){switch(r){case")":return"\\n";case">":return"\\t";case"o":return"^g";case'"':return'\\"';case":":return":"}return"{"==r.charAt(0)?'"+'+r.substr(1,r.length-2)+'+"':"("==r.charAt(0)?"\\u"+r.substr(1,r.length-2):e}),this.aliases[this.num_alaises]=u,n+="@"+this.num_alaises++,s++}}else n+=e.substr(l,s-l),c=!0,a=s;l=s}return n+=e.substr(l)}for(s=this.num_alaises-1;s>=0;s--)e=e.replace("@"+s,'"'+this.aliases[s]+'"');return e}function lolspace_tokenise(e){for(var r=[],a=[],s=0;s<e.length;s++){var l=e.substr(s),c=null;(c=/^A\b/.exec(l))?r.push("A"):(c=/^I HAS A(?=\s)/.exec(l))?r.push("DECLARE"):(c=/^(R|IT[SZ])(?=\s)/.exec(l))?r.push("ASSIGN"):(c=/^G[EI]MMEH(?=\s)/.exec(l))?r.push("PROMPT"):(c=/^MAEK(?=\s)/.exec(l))?r.push("CAST"):(c=/^TOKS\b/.exec(l))?r.push("A"):(c=/^(BUS|AS TURIU TOKI|AS TURIU|PAS MANE YRA TOKSAI|PAS MANE YRA TOKS|PAS MANE YRA)(?=\s)/.exec(l))?r.push("DECLARE"):(c=/^(KURIS YRA|KURS YRA|DABAR YRA)(?=\s)/.exec(l))?r.push("ASSIGN"):(c=/^(IVESK MAN|IVESK|DUOK MAN|DOK MAN|DOK MA|DOUK MAN)(?=\s)/.exec(l))?r.push("PROMPT"):(c=/^(PADARYK|PADARIK)(?=\s)/.exec(l))?r.push("CAST"):(c=/^(NOOB|YARN|NUMBR|NUMBAR|TROOF|BUKKIT)(?=\s)/.exec(l))?r.push("TYPE"):(c=/^(SMALL?E?R|BIGG?E?R) THAN\b/.exec(l))?r.push("CMP_OP"):(c=/^O RLY\?/.exec(l))?r.push("START_IF"):(c=/^YA RLY\b/.exec(l))?r.push("IF"):(c=/^MEBBE\b/.exec(l))?r.push("ELSE_IF"):(c=/^NO WAI\b/.exec(l))?r.push("ELSE"):(c=/^OIC\b/.exec(l))?r.push("END_IF"):(c=/^(NOOB|YARN|NUMBR|NUMBAR|TROOF|BUKKIT|KRUVA|TUSCIA|NUMERIS|RAIDES|LOGIKA)(?=\s)/.exec(l))?r.push("TYPE"):(c=/^(MAZESNIS|DIDESNIS) NEGU\b/.exec(l))?r.push("CMP_OP"):(c=/^AR TIKRAI\?/.exec(l))?r.push("START_IF"):(c=/^TAIP TIKRAI\b/.exec(l))?r.push("IF"):(c=/^TADA JEIGU\b/.exec(l))?r.push("ELSE_IF"):(c=/^(TADA|NA TADA)\b/.exec(l))?r.push("ELSE"):(c=/^(BAIGES VARIJENTAI|NER VARIJENTU|BAIGES VARIANTAI|NERA VARIANTU|PASIBAIGE VARIANTAI)\b/.exec(l))?r.push("END_IF"):(c=/^AN\b/.exec(l))?r.push("COMMA"):(c=/^YRA\b/.exec(l))?r.push("COMMA"):(c=/^IR\b/.exec(l))?r.push("COMMA"):(c=/^((\-\s*)?\d+(\.\d+)?|true|false|@\d+(!\w+){0,2})\b/.exec(l))?r.push("LITERAL"):(c=/^(((SUM|DIFF|PRODUKT|MOD|QUOSHUNT|BOTH|EITHER|BIGGR|SMALLR|WON) OF)|BOTH SAEM|DIFFRINT)\b/.exec(l))?r.push("BINARY_OP"):(c=/^(((SUMA|SKIRTUMAS|SANDAUGA|LIEKANA|DALYBA|ABUDU|VIENAS|DIDESNIS|MAZESNIS|PAVYKO) IS)|ATRODO KAD|SKIRIASI)\b/.exec(l))?r.push("BINARY_OP"):(c=/^(ALL|ANY|CHR|ORD|LEN) OF\b/.exec(l))?r.push("NARY_OP"):(c=/^GOT\b/.exec(l))?r.push("NARY_OP"):(c=/^(VISI|BET KURIS|CHR|ORD|LEN) IS\b/.exec(l))?r.push("NARY_OP"):(c=/^TURI\b/.exec(l))?r.push("NARY_OP"):(c=/^NOT\b/.exec(l))?r.push("NARY_OP"):(c=/^NE\b/.exec(l))?r.push("NARY_OP"):(c=/^IM IN [YU]R \w+$/.exec(l))?r.push("LOOP_INF"):(c=/^IM IN [YU]R [a-zA-Z]\w+/.exec(l))?r.push("LOOP"):(c=/^IM OUTTA [YU]R \w+\b/.exec(l))?r.push("END_LOOP"):(c=/^(WILE|TILL?)\b/.exec(l))?r.push("LOOP_CONDITION"):(c=/^(UPPIN|NERFIN) [YU]R\b/.exec(l))?r.push("LOOP_ACTION"):(c=/^DABAR PRADESIME SUKTIS \w+$/.exec(l))?r.push("LOOP_INF"):(c=/^AS ESU CIKLE [a-zA-Z]\w+/.exec(l))?r.push("LOOP"):(c=/^ISEINAME IS CIA \w+\b/.exec(l))?r.push("END_LOOP"):(c=/^(WILE|TILL?)\b/.exec(l))?r.push("LOOP_CONDITION"):(c=/^(DIDINU|MAZINU) \b/.exec(l))?r.push("LOOP_ACTION"):(c=/^!!*/.exec(l))?r.push("SCREECH"):(c=/^\?/.exec(l))?r.push("QUESTION_MARK"):(c=/^UPZ\b/.exec(l))?r.push("INC_OP"):(c=/^!!*/.exec(l))?r.push("SCREECH"):(c=/^\?/.exec(l))?r.push("QUESTION_MARK"):(c=/^DIDINAME\b/.exec(l))?r.push("INC_OP"):(c=/^VISIBLE\b/.exec(l))?r.push("STDOUT"):(c=/^(PARASAI|PARASYK|PARASAU|RASAI)\b/.exec(l))?r.push("STDOUT"):(c=/^IZ\b/.exec(l))?r.push("INLINE_IF"):(c=/^KTHX\b/.exec(l))?r.push("INLINE_IF_END"):(c=/^GTFO\b/.exec(l))?r.push("BREAK"):(c=/^WTF\\?\b/.exec(l))?r.push("SWITCH"):(c=/^OMG\b/.exec(l))?r.push("SWITCH_CASE"):(c=/^OMGWTF\b/.exec(l))?r.push("SWITCH_CASE_DEFAULT"):(c=/^SMOOSH\b/.exec(l))?r.push("NARY_OP"):(c=/^JEIGU\b/.exec(l))?r.push("INLINE_IF"):(c=/^VISKAS\b/.exec(l))?r.push("INLINE_IF_END"):(c=/^BAIGIAM\b/.exec(l))?r.push("BREAK"):(c=/^VARIANTAI\\?\b/.exec(l))?r.push("SWITCH"):(c=/^TIKO\b/.exec(l))?r.push("SWITCH_CASE"):(c=/^NETIKO\b/.exec(l))?r.push("SWITCH_CASE_DEFAULT"):(c=/^(SUKISTI|SUKISAI|SUKISAM)\b/.exec(l))?r.push("NARY_OP"):(c=/^(MKAY|NOTHING?(?: ELSE)?)\b/.exec(l))?r.push("OP_TERM"):(c=/^(TAI TIEK|NIEKO?(?: ELSE)?)\b/.exec(l))?r.push("OP_TERM"):(c=/^HOW DUZ I\b/.exec(l))?r.push("FUNC_DEF"):(c=/^YR\b/.exec(l))?r.push("VAR"):(c=/^FOUND\b/.exec(l))?r.push("RETURN"):(c=/^IF U SAY SO\b/.exec(l))?r.push("FUNC_DEF_END"):(c=/^DABAR DARYK TAIP\b/.exec(l))?r.push("FUNC_DEF"):(c=/^DABAR TAIP DARYK\b/.exec(l))?r.push("FUNC_DEF"):(c=/^PARAMETRAS\b/.exec(l))?r.push("VAR"):(c=/^RADAU\b/.exec(l))?r.push("RETURN"):(c=/^TAI VA TAIP DARYK\b/.exec(l))?r.push("FUNC_DEF_END"):(c=/^[a-zA-Z@][a-zA-Z0-9_]*(\!\w+)*/.exec(l))&&r.push("IDENTIIFER"),c?(s+=c[0].length-1,a.push(c[0])):(c=l.match(/^\S+/))&&(lolspace_error("Tokeniser: neatpažinta seka:\n"+l.match(/^\S+/)+"\n"+l.substr(s)),s+=c[0].length-1)}r.length!=a.length&&lolspace_error("Kažkaip atsirado daugiau žetonų nei sutapimų. Kaput, sveikinu, sulaužei, buržujau!");var n=[];for(s=0;s<r.length;s++)n.push(r[s]),n.push(a[s]);return n}function lolspace_sub_cmp_op(e){var r=e[1];return"B"==r.charAt(0)?">"+lolspace_eval_line(e.slice(2)):"S"==r.charAt(0)?"<"+lolspace_eval_line(e.slice(2)):"D"==r.charAt(0)?">"+lolspace_eval_line(e.slice(2)):"M"==r.charAt(0)?"<"+lolspace_eval_line(e.slice(2)):"NOT"==r?"!("+lolspace_eval_line(e.slice(2))+")":void 0}function lolspace_get_var_(e){var r=e[1];return r.split("!").length-1?(r=(r=r.replace(/!/,"[")).replace(/!/g,"]["),r+="]"):r}function lolspace_eval_expr(e){e[1];for(var r={"SUM OF":{symbol:"+",nary:2,before:"(",after:")"},"DIFF OF":{symbol:"-",nary:2,before:"(",after:")"},"PRODUKT OF":{symbol:"*",nary:2,before:"(",after:")"},"MOD OF":{symbol:"%",nary:2,before:"(",after:")"},"QUOSHUNT OF":{symbol:"/",nary:2,before:"(",after:")"},"BOTH OF":{symbol:"&&",nary:2,before:"(",after:")"},"EITHER OF":{symbol:"||",nary:2,before:"(",after:")"},"BOTH SAEM":{symbol:"==",nary:2,before:"(",after:")"},DIFFRINT:{symbol:"!=",nary:2,before:"(",after:")"},"BIGGR OF":{symbol:",",nary:2,before:"(Math.max(",after:"))"},"SMALLR OF":{symbol:",",nary:2,before:"(Math.min(",after:"))"},"WON OF":{symbol:",",nary:2,before:"(lolspace_xor(",after:"))"},"ALL OF":{symbol:")&&(",nary:-1,before:"((",after:"))"},"ANY OF":{symbol:")||(",nary:-1,before:"((",after:"))"},SMOOSH:{symbol:"+",nary:-1,before:'""+',after:""},NOT:{symbol:"",nary:1,before:"!(",after:")"},GOT:{symbol:",",nary:-1,before:"[",after:"]"},"CHR OF":{symbol:"",nary:1,before:"lolspace_chr(",after:")"},"ORD OF":{symbol:"",nary:1,before:"lolspace_ord(",after:")"},"LEN OF":{symbol:"",nary:1,before:"lolspace_len(",after:")"},"SUMA IS":{symbol:"+",nary:2,before:"(",after:")"},"SKIRTUMAS IS":{symbol:"-",nary:2,before:"(",after:")"},"SANDAUGA IS":{symbol:"*",nary:2,before:"(",after:")"},"LIEKANA IS":{symbol:"%",nary:2,before:"(",after:")"},"DALYBA IS":{symbol:"/",nary:2,before:"(",after:")"},"ABUDU IS":{symbol:"&&",nary:2,before:"(",after:")"},"VIENAS IS":{symbol:"||",nary:2,before:"(",after:")"},"ATRODO KAD":{symbol:"==",nary:2,before:"(",after:")"},SKIRIASI:{symbol:"!=",nary:2,before:"(",after:")"},"DIDESNIS IS":{symbol:",",nary:2,before:"(Math.max(",after:"))"},"MAZESNIS IS":{symbol:",",nary:2,before:"(Math.min(",after:"))"},"PAVYKO IS":{symbol:",",nary:2,before:"(lolspace_xor(",after:"))"},"VISI IS":{symbol:")&&(",nary:-1,before:"((",after:"))"},"BET KURIS IS":{symbol:")||(",nary:-1,before:"((",after:"))"},SUKISAM:{symbol:"+",nary:-1,before:'""+',after:""},SUKISAI:{symbol:"+",nary:-1,before:'""+',after:""},SUKISTI:{symbol:"+",nary:-1,before:'""+',after:""},NE:{symbol:"",nary:1,before:"!(",after:")"},TURI:{symbol:",",nary:-1,before:"[",after:"]"},"CHR OF":{symbol:"",nary:1,before:"lolspace_chr(",after:")"},"ORD OF":{symbol:"",nary:1,before:"lolspace_ord(",after:")"},"ILGIS SITO":{symbol:"",nary:1,before:"lolspace_len(",after:")"}},a=[],s="",l=0;l<e.length;l+=2){var c=e[l+1],n=e[l],t=!1;switch(n){case"BINARY_OP":case"NARY_OP":if(a.length){var o=a[a.length-1];s+=o.terms?o.symbol:""}var u={symbol:(_=r[c]).symbol,nary:_.nary,before:_.before,after:_.after,terms:0};s+=u.before,a.push(u);break;case"COMMA":break;case"OP_TERM":t=!0;break;case"IDENTIIFER":if(a.length)s+=(_=a[a.length-1]).terms?_.symbol:"";var I=lolspace_func_get_num_args(c);if(!1!==I){var _={nary:I,terms:0,symbol:",",before:"",after:")"};a.push(_),s+=c+"("}else s+=lolspace_get_var_([n,c]),++_.terms;break;case"LITERAL":s+=(_=a[a.length-1]).terms?_.symbol:"",s+=lolspace_get_var_([n,c]),++_.terms;break;default:lolspace_error("Unexpected token in expression\n"+n+"\n"+c)}if(!a.length)break;for(;;){if(!((_=a[a.length-1]).terms>=_.nary&&-1!=_.nary||t))break;if(t=!1,a.pop(),s+=_.after,!a.length)break;a[a.length-1].terms++}if(!a.length)break}for(;a.length;)s+=a.pop().after;return l<e.length-2&&(s+=lolspace_eval_line(e.slice(l+2))),s}function lolspace_eval_identifier(e){return lolspace_is_func(e[1])?lolspace_eval_expr(e):lolspace_get_var_([e[0],e[1]])+lolspace_eval_line(e.slice(2))}function lolspace_eval_line(e){if(!e.length)return"";var r=e[0];switch(r){case"BINARY_OP":case"NARY_OP":return lolspace_eval_expr(e);case"IDENTIIFER":return lolspace_eval_identifier(e);case"ASSIGN":return"="+lolspace_eval_line(e.slice(2));case"LITERAL":return lolspace_eval_identifier(e);case"CAST":var a,s="",l=null,c=[];for(a=2;a<e.length;a+=2){if("A"==e[a]){l=e[(a+=2)+1];break}c.push(e[a],e[a+1])}switch(l){case"YARN":s="String";break;case"TROOF":s="Boolean";break;case"NUMBR":s="parseInt";break;case"NUMBAR":s="Number";break;case"BUKKIT":s="lolspace_cast_bukkit";break;case"RAIDES":s="String";break;case"PROTAS":s="Boolean";break;case"NUMERIS":s="parseInt";break;case"SKAICIUS":s="Number";break;case"KRUVA":s="lolspace_cast_bukkit";break;default:return void lolspace_error("Cast to unknown type\n"+l)}return s+"("+lolspace_eval_line(c)+")"+lolspace_eval_line(e.slice(a+2));case"TYPE":return e[1]+lolspace_eval_line(e.slice(2));case"QUESTION_MARK":return lolspace_eval_line(e.slice(2));case"CMP_OP":return lolspace_sub_cmp_op(e);default:return lolspace_error("Unknown token "+r),e.slice(2)}}function lolspace_parse_loop(e){var r=e[5]+(e[3].match(/^DIDINU/)?"++":"--"),a=lolspace_eval_line(e.slice(8));return"K"==e[7].charAt(0)&&(a="!("+a+")"),"for(("+(e[5]+"= ((typeof "+e[5]+'=="undefined")? 0 :'+e[5]+")")+");"+a+";"+r+"){"}function lolspace_eval_func_def(e){for(var r="function "+e[3]+"(",a=0,s=4;s<e.length;s+=2){var l=e[s+1];"IDENTIIFER"==e[s]&&(r+=l,a++,r+=",")}return r=r.replace(/,+$/,""),r+="){\nvar IT=undefined;\n",lolspace_user_functions.push({name:e[3],num_args:a}),r}function lolspace_translate_line(e){if(!e.length)return"";switch(e[0]){case"BINARY_OP":case"NARY_OP":return"IT="+lolspace_eval_expr(e)+";";case"DECLARE":return"var "+e[3]+" = null;";case"START_IF":return"";case"IF":return"if(IT){";case"ELSE_IF":return"}else if("+lolspace_eval_line(e.slice(2))+"){";case"ELSE":return"} else {";case"END_IF":case"END_LOOP":return"}";case"IDENTIIFER":case"LITERAL":return e.length>=2&&"ASSIGN"!=e[2]?"IT = "+lolspace_eval_identifier(e)+";":lolspace_eval_identifier(e)+";";case"PROMPT":return e[3]+' = prompt("'+e[3]+'");';case"STDOUT":var r=!("SCREECH"==e[e.length-2]);return"lolspace_puts("+lolspace_eval_line(r?e.slice(2):e.slice(2,e.length-2))+","+r+");";case"INC_OP":var a=lolspace_eval_identifier([e[2],e[3]]);return e.length>=8?a+="+="+lolspace_eval_line(e.slice(6))+";":a+="++;",a;case"INLINE_IF":return"if("+lolspace_eval_line(e.slice(2))+"){";case"INLINE_IF_END":return"}";case"BREAK":return"break;";case"LOOP_INF":return"while(1){";case"LOOP":case"RATUKU":return lolspace_parse_loop(e);case"SWITCH":return"switch(IT){";case"SWITCH_CASE":return"case "+e[3]+":";case"SWITCH_CASE_DEFAULT":return"default:";case"RETURN":return"return "+lolspace_eval_line(e.slice(4))+";";case"FUNC_DEF":return lolspace_eval_func_def(e);case"FUNC_DEF_END":return"return (IT==undefined)? null : IT;}";default:return lolspace_eval_line(e)}return""}function loljs(e){lolspace_init();for(var r=(e=lolspace_prepare(e=lolspace_do_string_literals(e=lolspace_strip_comments(e),!0))).split("\n"),a="var IT;\n",s=0;s<r.length;s++){a+=lolspace_translate_line(lolspace_tokenise(r[s]))+"\n"}return a=lolspace_do_string_literals(a,!1)}
